# 計算プリント自動作成サービス

> 小学校算数のカリキュラムに沿った計算プリントを、ブラウザだけで生成・印刷できるReactアプリです。

[![TypeScript](https://img.shields.io/badge/TypeScript-5.9+-blue.svg)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-19.0+-61dafb.svg)](https://react.dev/)
[![Vite](https://img.shields.io/badge/Vite-7+-purple.svg)](https://vitejs.dev/)
[![MathML](https://img.shields.io/badge/MathML-Print--ready-green.svg)](https://www.w3.org/Math/)

## ライブデモ

- URL: https://knishioka.github.io/math-worksheet/
- MathML対応ブラウザ（Safari、Firefox、Chromium系の最新版）で最も綺麗に表示できます。
- ブラウザ側で完結するため、個人情報や学習履歴はサーバーに送信されません。

## このアプリでできること

### 学年と学習目的に合わせた問題生成
- 学年別の計算パターンを100種類以上用意。繰り上がり計算や筆算、虫食い算まで幅広くカバーします。
- 分数・小数・帯分数・百分率など、中高学年向けの内容もMathMLで美しく出力します。
- お金・時間・単位変換・温度・距離・料理など、生活科目と結び付けた応用問題を収録しています。
- 国際学校向けに、英語の文章題や英単位での換算問題も生成できます。

### 印刷しやすいワークフロー
- 設定は「学年 → パターン → レイアウト」の順にガイドされ、選択肢は学習範囲外を自動で除外します。
- 推奨問題数・最大問題数を自動で提案し、A4用紙に収まらない場合は警告を表示します。
- プレビュー画面から複数ページ分の問題をまとめて生成・印刷でき、解答欄の有無も切り替え可能です。
- 印刷レイアウトは1〜3列に対応し、列数に応じて余白と行間を最適化します。

### 安心して使える設計
- 設定はブラウザのローカルストレージに保存され、次回アクセス時も同じ条件で再開できます。
- 生成ロジックはTypeScriptで型安全に管理し、単体テストと検証スクリプトで回帰を防ぎます。
- Node.jsのローカル環境だけで開発・ビルドでき、学校やご家庭でも簡単に導入できます。

## 問題カテゴリの例

| カテゴリ | 主な内容 | 主な対象学年 |
| --- | --- | --- |
| 基本計算 | 1桁の加減算、2桁の筆算、3桁以上の四則、九九、繰り上がり・繰り下がり、虫食い算 | 1〜4年生 |
| 分数・小数 | 同分母／異分母の加減、帯分数、小数の乗除、百分率、比と比例、速さ | 3〜6年生 |
| 文章題 | 日本語の単位問題、生活に根ざした買い物・交通・エネルギー問題、英語文章題 | 1〜6年生 |
| 実生活応用 | 時刻・経過時間、単位変換、温度、距離と地図、料理、家計・お小遣い管理 | 2〜6年生 |

## 技術スタック

- **フレームワーク**: React 19 + TypeScript 5.9 + Vite 7
- **状態管理**: Zustand（ローカルストレージ永続化付き）
- **スタイル**: Tailwind CSS + カスタム印刷スタイル
- **印刷**: React-to-printによる複数ページ印刷、pdfmake（オプション設定で有効化）
- **テスト**: Vitest + Testing Library、ESLint、TypeScript typecheck

## セットアップ

### 必要な環境
- Node.js 18以上
- npm 9以上

### ローカル開発の流れ
```bash
# リポジトリの取得
git clone https://github.com/knishioka/math-worksheet.git
cd math-worksheet

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
# ブラウザで http://localhost:5173/ を開きます
```

## 使い方

1. 学年を選択すると、利用可能な計算パターンが自動で表示されます。
2. 「虫食い算」「筆算」「お金の計算」など目的に合うパターンを選択します。
3. レイアウト（1〜3列）と問題数を調整すると、推奨値が自動で反映されます。
4. 「解答表示」をオンにすると答え付きプリントを確認できます。
5. 「印刷（複数ページにも対応）」ボタンから必要枚数を入力し、ブラウザの印刷画面で出力します。

## 品質チェック

開発者は以下のコマンドで品質ゲートを通過させてからコミットしてください。

```bash
npm run lint         # ESLint
npm test -- --run    # Vitest（ウォッチ無効）
npm run typecheck    # TypeScript型チェック
npm run build        # 本番ビルド確認
```

必要に応じて `verify-*.mjs` スクリプトで問題生成ロジックの追加検証を実施できます。

## ドキュメント

- [CLAUDE.md](./CLAUDE.md): 開発規約とレビュー方針
- [docs/](./docs/): 仕様書・実装計画・リサーチ資料

## ライセンスとサポート

- ライセンス: [MIT](./LICENSE)
- 不具合報告・要望: GitHub Issues / Discussions
- デモでのフィードバックも歓迎しています。
